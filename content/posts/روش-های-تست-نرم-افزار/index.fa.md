---
title: "انواع روش‌های تست نرم‌افزار: Test Duobleها"
date: 2025-03-24T21:15:33+01:00
draft: false
tags:
- تست نرم افزار
- یونیت تست
- ماک تست
- اتومیت تست
- تست اتوماتیک
categories: 
- مهندسی نرم افزار
cover:
  image: /روش-های-تست-نرم-افزار/test-double.webp
  caption: تصویر ساخته شده توسط [grok](https://x.com/i/grok)
  alt: تست دابل‌ها
slug: "روش-های-تست-نرم-افزار"
---
در هنگام نوشتن Automation Test برای یک نرم‌افزار، با دیپندنسی‌ها و APIهایی مواجه می‌شیم که ترجیح می‌دیم در هر بار اجرای تست‌ها اون‌ها رو فراخوانی نکنیم. در چنین مواقعی، از [Test Double](https://en.wikipedia.org/wiki/Test_double)ها استفاده می‌کنیم که انواع متفاوتی دارند و اغلب به اشتباه به همه‌ اون‌ها Mock می‌گیم. اینجا سه نوع رایج Test Double و تفاوت‌هاشون رو توضیح می‌دم.

## فیک Fake
این نوع Test Double به عنوان یک جایگزین ساده‌تر، کم‌هزینه‌تر و قابل آزمایش‌تر برای دیپندنسی مورد نظر استفاده می‌شه. Fakeها از همون interfaceهای دیپندنسی اصلی استفاده می‌کنه و اون‌ها رو پیاده‌سازی می‌کنه. مثلاً، فرض کنید می‌خوایم یک شیء رو در دیتابیس بنویسیم و بخونیم. به جای راه‌اندازی یک دیتابیس واقعی برای اجرای هربارهٔ تست‌ها، از یک دیکشنری in memory استفاده می‌کنیم تا وظیفه خوندن و نوشتن داده‌ها رو برامون انجام بده. توی این حالت این دیکشنری وظیفهٔ Fake کردن دیتابیس اصلی رو بر عهده داره.

## استاب Stub
 بعضاً برای نوشتن یک تست به داده‌های خاصی نیاز داریم. مثلاً فرض کنید که کامپوننتی داریم که مجموع درآمد روزانه رو برای ما حساب می‌کنه. برای این کار به داده‌های درآمدی یک روز نیاز داریم اما می‌تونیم به جای استفاده از داده‌های واقعی، یک Stub داشته باشیم که داده‌هایی که شبیه به داده‌های واقعیه رو تولید کنه تا منطقمون رو بر روی این داده‌ها پیاده‌سازی کنیم. پس به Test Doubleای که وظیفهٔ تولید داده‌ها رو داره Stub می‌گیم.

## ماک Mock
گاهی اوقات می‌خوایم رفتار یک دیپندنسی رو بررسی کنیم و نه خروجی و یا پیاده‌سازی اون رو. به طور مثال، ممکنه در یک تست بخوایم تأیید کنیم که یک API خاص فقط یک بار فراخوانی می‌شه و نه بیشتر و نه کمتر. در این مواقع از Mock استفاده می‌کنیم.

## مثال عملی
در پست [Go Test Doubles by Example](https://aminrb.me/go-test-double/) به صورت مفصل در مورد تفاوت این موارد در سطح کد نوشتم و به کمک زبان Golang به صورت ساده این موارد رو پیاده‌سازی کردم: